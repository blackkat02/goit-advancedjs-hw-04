{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\n\nimport '../css/styles.css';\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { dataTotalHits, page, per_page } from \"./pixabay-api\"\n\nconst gallery = document.querySelector(\".gallery\");\nconst messageEmpty = \"Sorry, there are no images matching your search query. Please try again!\";\nconst messageEnd = \"We're sorry, but you've reached the end of search results.\"\nlet lightbox;\n\nconst showIziToast = (title, message) => {\n  iziToast.show({\n    title: \"Invalid Request\",\n    message: message,\n    backgroundColor: \"#ff6666\",\n    position: \"topRight\",\n  });\n};\n\nfunction createPhotoCard({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n  const card = document.createElement(\"li\");\n  card.classList.add('photo-card');\n\n  card.innerHTML = `\n      <a href=\"${largeImageURL}\" class=\"gallery-link\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n      </a>\n      <div class=\"info\">\n        <div class=\"info-item\">\n          <span><b>Likes</b></span>\n          <span>${likes}</span>\n        </div>\n        <div class=\"info-item\">\n          <span><b>Views</b></span>\n          <span>${views}</span>\n        </div>\n        <div class=\"info-item\">\n          <span><b>Comments</b></span>\n          <span>${comments}</span>\n        </div>\n        <div class=\"info-item\">\n          <span><b>Downloads</b></span>\n          <span>${downloads}</span>\n        </div>\n      </div>\n    `;\n\n  gallery.appendChild(card);\n}\n\nfunction renderGallery(images) {\n  if (page === 1) {\n    gallery.innerHTML = \"\";\n  }\n\n  images.forEach(image => {\n    createPhotoCard(image);\n  });\n\n  if (dataTotalHits > (page * per_page)) {\n    showLoadMoreButton();\n  } else {\n    hideLoadMoreButton();\n    showIziToast();\n  }\n  \n  console.log(dataTotalHits)\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox(\".gallery a\", {\n      captionsData: \"alt\",\n      captionDelay: 250\n    });\n  } else {\n    lightbox.refresh();\n  }\n};\n\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\n// Функція для показу кнопки\nfunction showLoadMoreButton() {\n  loadMoreBtn.classList.remove('is-hidden');\n}\n\n// Функція для приховування кнопки\nfunction hideLoadMoreButton() {\n  loadMoreBtn.classList.add('is-hidden');\n}\n\nexport { createPhotoCard, renderGallery, gallery };","import axios from 'axios';\nimport '../css/styles.css';\nimport { createPhotoCard, renderGallery, gallery } from \"./render-functions\";\n\nconst API_KEY = \"49334918-ea87b03a35c8c75cd9fd8a30d\";\nlet query = \"\";\nlet page = 1;\nlet per_page = 15;\nlet dataTotalHits = 0;\nconst btnLoadMore = document.querySelector(\".load-more-btn\");\n\naxios.defaults.baseURL = \"https://pixabay.com/api/\";\n\nfunction showLoader(isLoading = false) {\n    const loader = document.querySelector(\".js-loader\");\n    loader.style.display = isLoading ? \"block\" : \"none\";\n}\n\nfunction handleSearch(event) {\n    console.log(\"submit-start\");\n    event.preventDefault();\n    showLoader(true);\n    \n    page = 1;\n\n    const input = event.target.querySelector(\"input[name='query']\");\n    if (!input || input.value.trim() === \"\") {\n        console.log(\"Поле пошуку порожнє!\");\n        showLoader(false);\n        if (input) {\n            input.value = \"\";\n        }\n        return;\n    }\n\n    query = input.value.trim();\n    performSearch(query);\n}\n\nfunction handleClick() {\n    showLoader(true);\n    console.log(\"click-start\");\n    console.log(query);\n    if (query === \"\") {\n        showLoader(false);\n        console.log(\"not query\");\n        return\n    }\n\n    page += 1;\n\n    performSearch(query);\n}\n\nfunction performSearch(query) {\n    console.log(\"Шукаємо:\", query);\n\n    getPhotos(query)\n        .catch((error) => console.error(\"Помилка при отриманні фото:\", error))\n        .finally(() => {\n            showLoader(false);\n            const input = document.querySelector(\"input[name='query']\");\n            input.value = \"\";\n            console.log(\"ours:\", query);\n\n        });\n}\n\n\nasync function getPhotos(query) {\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        page: page,\n        per_page: per_page,\n    };\n\n    try {\n        const response = await axios.get('/', { params });\n        const data = response.data;\n\n        console.log(`\"page:\" ${page}`);\n        console.log(`\"data.hits:\" ${data.hits}`);\n        console.log(`Total images found: ${data.total}`);\n        console.log(`Total accessible images: ${data.totalHits}`);\n        dataTotalHits = data.totalHits;\n\n        data.hits.forEach(image => {\n            const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = image;\n            createPhotoCard({ webformatURL, largeImageURL, tags, likes, views, comments, downloads });\n        });\n\n        renderGallery(data.hits);\n    } catch (error) {\n        console.error(\"Помилка при отриманні фото:\", error);\n        throw error;\n    }\n}\n\nexport { handleSearch, handleClick, dataTotalHits, gallery, page, per_page };","const listenerSubmit = document.querySelector(\".form\");\nconst listenerClick = document.querySelector(\".load-more-btn\")\n\nimport { handleSearch, handleClick } from \"./js/pixabay-api.js\";\n\nlistenerSubmit.addEventListener(\"submit\", handleSearch);\nlistenerClick.addEventListener(\"click\", handleClick);"],"names":["gallery","lightbox","showIziToast","title","message","iziToast","createPhotoCard","webformatURL","largeImageURL","tags","likes","views","comments","downloads","card","renderGallery","images","page","image","dataTotalHits","per_page","showLoadMoreButton","hideLoadMoreButton","SimpleLightbox","loadMoreBtn","API_KEY","query","axios","showLoader","isLoading","loader","handleSearch","event","input","performSearch","handleClick","getPhotos","error","params","data","listenerSubmit","listenerClick"],"mappings":"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"}